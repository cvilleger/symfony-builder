os: linux

language: php

php:
  - 7.1
  - 7.2
  - 7.3
  - 7.4
  - nightly

matrix:
  allow_failures:
    - php: nightly

script:
  - composer create-project symfony/skeleton build
  - rm -rf build/var build/vendor

before_deploy:
  - tar -zcf symfony-skeleton-PHP${TRAVIS_PHP_VERSION}.tar.gz build

deploy:
  provider: releases
  name: symfony-skeleton-PHP${TRAVIS_PHP_VERSION}
  prerelease: true
  release_notes: "This is a pre-release of Symfony Skeleton with auto-build"
  token: ${YOUR_API_KEY}
  file: symfony-skeleton-PHP${TRAVIS_PHP_VERSION}.tar.gz
  overwrite: true
  cleanup: true
  draft: true
